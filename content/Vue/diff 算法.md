---
tags:
  - vue
---
# diff 算法

## 定义

更新视图时结合虚拟 DOM 比较树形结构差异的算法

## 原理

- 节点相同的条件

   - 标签

   - key 值

- 同层节点比对

   - 不同：直接替换

   - 相同

      - 复用节点

      - 更新属性

      - 判断有没有子节点

- 深层节点递归比对

   - 节点类型不同：视情况复用、插入和删除节点

   - 节点类型都是数组

      1. 使用双指针算法缩小需要更新节点的范围

      2. 定位出中间乱序的部分：利用 key 值映射表遍历查找可以复用的节点

      3. 最后头尾指针错位：视情况插入或删除剩余节点



---

- [面试官：你了解vue的diff算法吗？说说看 | web前端面试 - 面试官系列](https://vue3js.cn/interview/vue/diff.html)

- [图文并茂地来详细讲讲Vue Diff算法 - 掘金](https://juejin.cn/post/6971622260490797069)

- [Vue 中 diff 算法原理\_vue的diff算法原理-CSDN博客](https://blog.csdn.net/qq_38290251/article/details/125600211)