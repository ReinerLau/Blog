---
title: 格式化代码
tags:
  - 工程化
---
## 为什么需要格式化代码

统一团队的代码格式，一定程度上提升了可读性，也避免因为提交时因为格式不一致导致提交内容包含太多无关的格式化变更

## prettier

### 基本用法

安装依赖

```shell
pnpm add --save-dev prettier
```

在 `.prettierrc.cjs` 中配置

```js
module.exports = {
  semi: false,
}
```

脚本

```json
{
	"scripts": {
		"format": "prettier --write"
	}
}
```

### 兼容 eslint

安装依赖

```shell
npm install --save-dev eslint-plugin-prettier eslint-config-prettier
```

配置

`.eslintrc.cjs`

```js
module.exports = {
  extends: [
    "eslint:recommended",
    "plugin:prettier/recommended",
  ]
}
```

`plugin:prettier/recommended` 自动关闭 `eslint` 和风格有关的规则，自动配置了 `eslint-plugin-prettier` 和 `eslint-config-prettier` 

`plugin:prettier/recommended` 放到数组最后一个保证可以覆盖前面的规则

### VSCode 插件

安装[插件](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)

配置保存自动格式化（似乎配置文件命名要以 `.prettierrc` 才行，不过如果成到 eslint 中就不需要了）

`.vscode/settings.json`

```json
{
	"editor.defaultFormatter": "esbenp.prettier-vscode",
	"editor.formatOnSave": true
}
```

