---
title: 如何实现虚拟滚动
tags:
  - 功能
---
## 为什么需要虚拟滚动

假设一个 vue 组件用 v-for 一次性不分页渲染 100000 条列表数据，且不说从后端请求这些数据所需要的时间，光是从加载数据到可以交互的时间就能直观感觉到卡顿，数据量越大感觉越明显，这种性能完全无法达到良好的用户体验，但这种一次性渲染大量列表数据的需求其实挺常见，因此需要一种手段优化大数据列表的性能，虚拟滚动就是最主流的解决方案，不过在解释虚拟滚动的原理之前，需要先了解普通渲染出现性能瓶颈的原因
## 分析

首先创建一个 vue 组件用于渲染列表数据

```html title="src/components/NormalScroller.vue"
<script setup lang="ts">
const props = defineProps<{
  // 可视区高度
  height: number
  // 所有数据
  data: { id: number; height: number }[]
}>()
</script>

<template>
  <div id="scroller" :style="{ height: props.height + 'px' }">
    <div class="item" v-for="item in data" :key="item.id" :style="{ height: item.height + 'px' }">
      {{ item.id }}
    </div>
  </div>
</template>

<style scoped>
#scroller {
  border: 1px solid #eee;
  overflow: auto;
}

.item {
  box-sizing: border-box;
  border: 1px solid #eee;
  background-color: #000;
  color: #fff;
}
</style>
```

## 源码

https://github.com/ReinerLau/virtual-scroller.git