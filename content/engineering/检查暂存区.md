---
title: 检查暂存区
tags:
  - 工程化
---
## 为什么需要检查暂存区

在使用 [husky](./husky.md) eslint 检查时，默认是对全部文件进行检查，不管文件是否有变更，产生了多余操作，导致检查速度变慢，进而导致提交速度变慢，我们知道要提交更改的文件都放在暂存区，那么只需要检查暂存区中的文件即可

## lint-staged

会匹配暂存区中对应格式的文件进行对应检查

安装

```shell
pnpm add --save-dev lint-staged
```

在 `pacakage.json` 中配置

```json
{
    "lint-staged": {
        "*.{js.ts}": "eslint --fix"
    }
}
```

- key 是匹配对应文件的语法
- value 是对匹配文件的检查命名

配置到 hook 上

```shell
#!/bin/sh
pnpm exec lint-staged
```

